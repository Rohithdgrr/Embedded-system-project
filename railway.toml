[build]
builder = "nixpacks"

[deploy]
startCommand = "cd ai_backend && gunicorn --workers 1 --threads 1 --timeout 180 --bind 0.0.0.0:$PORT 'src.detector:app'"
healthcheckPath = "/health"
healthcheckTimeout = 180
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

[deploy.env]
PYTHON_VERSION = "3.11.7"
FLASK_ENV = "production"
PYTHONUNBUFFERED = "true"
YOLO_VERBOSE = "false"
